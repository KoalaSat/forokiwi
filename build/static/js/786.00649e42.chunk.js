"use strict";(self.webpackChunkforokiwi=self.webpackChunkforokiwi||[]).push([[786],{5786:(e,l,n)=>{n.r(l),n.d(l,{ExternalForumList:()=>S});var s=n(9900),i=n(7170),t=n(2245),a=n(1645),r=n(481),d=n(7419),o=n(8125),c=n(5010),u=n(9288),x=n(7021),h=n(5448),j=n(3344),p=n(5043),g=n(6971),A=n(518),v=n(1144),y=n(2691),m=n(1690),f=n(9092),b=n(1875),k=n(7763),w=n(7764),C=n(9360),T=n(579);const{Text:L,Title:R}=s.A,S=()=>{var e;const l=(0,g.Zp)(),{t:n}=(0,f.B)(),{token:{colorBgContainer:s,borderRadiusLG:S}}=i.A.useToken(),{turtleMode:V,topicLanguage:B,setTopicLanguage:z}=(0,p.useContext)(k.BR),{ndk:E,saveForums:F}=(0,p.useContext)(m.gH),I=(0,p.useMemo)((()=>new Array(10).fill(new y.QB)),[]),[O,G]=(0,p.useState)(),[H,M]=(0,p.useState)(!0),[$,Q]=(0,p.useState)(1),U=[{dataIndex:"read",width:10,render:(e,l,n)=>(0,T.jsx)(t.A,{src:V?void 0:l.tagValue("image"),icon:(0,T.jsx)(j.A,{style:{fontSize:"20px"}})})},{dataIndex:"content",render:(e,l,n)=>{var s,i;return(0,T.jsx)(a.A,{span:24,children:(0,T.jsx)(r.A,{active:!0,loading:!l.id,paragraph:{rows:1,width:300,style:{margin:0,marginTop:-5}},title:{style:{marginTop:0}},children:(0,T.jsx)(d.A,{justify:"start",children:(0,T.jsxs)(a.A,{span:24,children:[(0,T.jsx)(d.A,{children:(0,T.jsx)(L,{strong:!0,children:null!==(s=l.tagValue("name"))&&void 0!==s?s:l.tagValue("d")})}),(0,T.jsx)(d.A,{children:(0,T.jsx)(a.A,{span:24,children:(0,T.jsx)(L,{type:"secondary",children:""===(null===l||void 0===l?void 0:l.tagValue("description"))?"-":null!==(i=null===l||void 0===l?void 0:l.tagValue("description"))&&void 0!==i?i:"-"})})})]})})})})}}];(0,p.useEffect)((()=>{Z()}),[$]);const Z=e=>{M(!0);let l={kinds:[34550],limit:10};if(O&&!e){var n,s;const e=Array.from(O),i=null!==(n=null===(s=e[e.length-1])||void 0===s?void 0:s.created_at)&&void 0!==n?n:0;l.until=i+1}e&&"all"!==e&&(l={...l,"#l":[e.split("-")[0]]}),E.fetchEvents(l,{closeOnEose:!0}).then((l=>{G((n=>e?[...l]:[...null!==n&&void 0!==n?n:[],...l])),F([...l].reduce(((e,l)=>(l.dTag&&(e[l.encode()]=l,e[l.dTag]=l),e)),{})),M(!1)}))};return(0,T.jsx)(h.UC,{children:(0,T.jsxs)(d.A,{justify:"space-between",children:[(0,T.jsx)(a.A,{xs:24,md:16,children:(0,T.jsxs)(d.A,{gutter:[0,10],children:[(0,T.jsx)(a.A,{span:24,children:(0,T.jsxs)(d.A,{justify:"space-between",children:[(0,T.jsx)(o.A,{items:[{title:(0,T.jsx)("a",{children:"Home"}),onClick:()=>l("/")},{title:n("pages.externalForumList.title")}]}),(0,T.jsxs)(a.A,{children:["all"===B?(0,T.jsx)(A.A,{style:{fontSize:16,marginRight:10}}):(0,T.jsx)(C.A,{countryCode:B.split("-")[1],style:{fontSize:16,marginRight:10}}),(0,T.jsx)(c.A,{showSearch:!0,style:{width:100},size:"small",onChange:e=>{z(e),Z(e)},defaultValue:B,filterOption:(e,l)=>{var n;return(null!==(n=null===l||void 0===l?void 0:l.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:[{value:"all",label:n("shared.all")},...w.e.filter(((e,l,n)=>l===n.findIndex((l=>l.label===e.label)))).map((e=>({...e,label:n(`language.${e.label}`)})))]})]})]})}),(0,T.jsx)(a.A,{span:"24",children:(0,T.jsx)(h.Ay,{style:{background:s,borderTopLeftRadius:S,borderTopRightRadius:S,paddingBottom:15},children:(0,T.jsx)(d.A,{justify:"space-around",align:"middle",children:(0,T.jsx)(a.A,{span:"20",children:(0,T.jsx)(d.A,{children:(0,T.jsx)(R,{children:n("pages.externalForumList.title")})})})})})}),(0,T.jsx)(h.Ay,{style:{background:s,borderRadius:S},children:(0,T.jsx)(u.A,{pagination:!1,columns:U,dataSource:H?I:[...null!==O&&void 0!==O?O:[]].slice(10*($-1),10*$),onRow:(e,n)=>({onClick:()=>l(`/forum/${e.encode()}`)})})}),(0,T.jsx)(a.A,{span:"24",children:(0,T.jsxs)(d.A,{justify:"space-between",children:[(0,T.jsx)(x.Ay,{type:"link",disabled:$<2,onClick:()=>Q((e=>e-1)),children:n("shared.previous")}),(0,T.jsx)(x.Ay,{type:"link",children:$}),(0,T.jsx)(x.Ay,{type:"link",disabled:(null!==(e=null===O||void 0===O?void 0:O.length)&&void 0!==e?e:1/0)<10*$,onClick:()=>Q((e=>e+1)),children:n("shared.next")})]})})]})}),(0,T.jsx)(a.A,{xs:0,md:7,children:(0,T.jsxs)(d.A,{gutter:[0,10],style:{marginTop:32},children:[(0,T.jsx)(a.A,{span:24,children:(0,T.jsx)(b.G,{})}),(0,T.jsx)(a.A,{span:24,children:(0,T.jsx)(v.O,{})})]})})]})})}}}]);
//# sourceMappingURL=786.00649e42.chunk.js.map