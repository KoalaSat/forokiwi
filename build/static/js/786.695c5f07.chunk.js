"use strict";(self.webpackChunkforokiwi=self.webpackChunkforokiwi||[]).push([[786],{5786:(e,n,s)=>{s.r(n),s.d(n,{ExternalForumList:()=>C});var i=s(9900),l=s(7170),d=s(2245),t=s(1645),r=s(481),a=s(7419),o=s(8125),c=s(9288),u=s(7021),x=s(5448),h=s(3344),j=s(5043),p=s(6971),A=s(1144),g=s(2691),v=s(1690),y=s(9092),m=s(1875),k=s(7763),f=s(579);const{Text:b,Title:w}=i.A,C=()=>{var e;const n=(0,p.Zp)(),{t:s}=(0,y.B)(),{token:{colorBgContainer:i,borderRadiusLG:C}}=l.A.useToken(),{turtleMode:T}=(0,j.useContext)(k.BR),{ndk:R,saveForums:B}=(0,j.useContext)(v.gH),L=(0,j.useMemo)((()=>new Array(10).fill(new g.QB)),[]),[S,V]=(0,j.useState)(),[E,F]=(0,j.useState)(!0),[G,H]=(0,j.useState)(1),I=[{dataIndex:"read",width:10,render:(e,n,s)=>(0,f.jsx)(d.A,{src:T?void 0:n.tagValue("image"),icon:(0,f.jsx)(h.A,{style:{fontSize:"20px"}})})},{dataIndex:"content",render:(e,n,s)=>{var i,l;return(0,f.jsx)(t.A,{span:24,children:(0,f.jsx)(r.A,{active:!0,loading:!n.id,paragraph:{rows:1,width:300,style:{margin:0,marginTop:-5}},title:{style:{marginTop:0}},children:(0,f.jsx)(a.A,{justify:"start",children:(0,f.jsxs)(t.A,{span:24,children:[(0,f.jsx)(a.A,{children:(0,f.jsx)(b,{strong:!0,children:null!==(i=n.tagValue("name"))&&void 0!==i?i:n.tagValue("d")})}),(0,f.jsx)(a.A,{children:(0,f.jsx)(t.A,{span:24,children:(0,f.jsx)(b,{type:"secondary",children:""===(null===n||void 0===n?void 0:n.tagValue("description"))?"-":null!==(l=null===n||void 0===n?void 0:n.tagValue("description"))&&void 0!==l?l:"-"})})})]})})})})}}];(0,j.useEffect)((()=>{M()}),[G]);const M=()=>{var e;if(F(!0),10*G>(null!==(e=null===S||void 0===S?void 0:S.length)&&void 0!==e?e:0)){const e={kinds:[34550],limit:10};if(S){var n,s;const i=Array.from(S),l=null!==(n=null===(s=i[i.length-1])||void 0===s?void 0:s.created_at)&&void 0!==n?n:0;e.until=l+1}R.fetchEvents(e,{closeOnEose:!0}).then((e=>{V((n=>[...null!==n&&void 0!==n?n:[],...e])),B([...e].reduce(((e,n)=>(n.dTag&&(e[n.encode()]=n,e[n.dTag]=n),e)),{})),F(!1)}))}else F(!1)};return(0,f.jsx)(x.UC,{children:(0,f.jsxs)(a.A,{justify:"space-between",children:[(0,f.jsx)(t.A,{xs:24,md:16,children:(0,f.jsxs)(a.A,{gutter:[0,10],children:[(0,f.jsx)(t.A,{span:24,children:(0,f.jsx)(a.A,{children:(0,f.jsx)(o.A,{items:[{title:(0,f.jsx)("a",{children:"Home"}),onClick:()=>n("/")},{title:s("pages.externalForumList.title")}]})})}),(0,f.jsx)(t.A,{span:"24",children:(0,f.jsx)(x.Ay,{style:{background:i,borderTopLeftRadius:C,borderTopRightRadius:C,paddingBottom:15},children:(0,f.jsx)(a.A,{justify:"space-around",align:"middle",children:(0,f.jsx)(t.A,{span:"20",children:(0,f.jsx)(a.A,{children:(0,f.jsx)(w,{children:s("pages.externalForumList.title")})})})})})}),(0,f.jsx)(x.Ay,{style:{background:i,borderRadius:C},children:(0,f.jsx)(c.A,{pagination:!1,columns:I,dataSource:E?L:[...null!==S&&void 0!==S?S:[]].slice(10*(G-1),10*G),onRow:(e,s)=>({onClick:()=>n(`/forum/${e.encode()}`)})})}),(0,f.jsx)(t.A,{span:"24",children:(0,f.jsxs)(a.A,{justify:"space-between",children:[(0,f.jsx)(u.Ay,{type:"link",disabled:G<2,onClick:()=>H((e=>e-1)),children:s("shared.previous")}),(0,f.jsx)(u.Ay,{type:"link",children:G}),(0,f.jsx)(u.Ay,{type:"link",disabled:(null!==(e=null===S||void 0===S?void 0:S.length)&&void 0!==e?e:1/0)<10*G,onClick:()=>H((e=>e+1)),children:s("shared.next")})]})})]})}),(0,f.jsx)(t.A,{xs:0,md:7,children:(0,f.jsxs)(a.A,{gutter:[0,10],style:{marginTop:32},children:[(0,f.jsx)(t.A,{span:24,children:(0,f.jsx)(m.G,{})}),(0,f.jsx)(t.A,{span:24,children:(0,f.jsx)(A.O,{})})]})})]})})}}}]);
//# sourceMappingURL=786.695c5f07.chunk.js.map