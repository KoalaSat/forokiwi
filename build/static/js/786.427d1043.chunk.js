"use strict";(self.webpackChunkforokiwi=self.webpackChunkforokiwi||[]).push([[786],{5786:(e,l,s)=>{s.r(l),s.d(l,{ExternalForumList:()=>B});var n=s(9900),i=s(6621),t=s(7170),a=s(2245),r=s(1645),d=s(481),o=s(7419),c=s(8125),u=s(5010),x=s(9288),h=s(7021),j=s(5448),p=s(3344),A=s(5043),g=s(6971),v=s(518),y=s(9997),m=s(2691),f=s(1690),b=s(9092),k=s(1875),w=s(7763),C=s(7764),T=s(9360),L=s(579);const{Text:R,Title:S}=n.A,{Search:V}=i.A,B=()=>{var e;const l=(0,g.Zp)(),{t:s}=(0,b.B)(),{token:{colorBgContainer:n,borderRadiusLG:i}}=t.A.useToken(),{turtleMode:B,topicLanguage:z,setTopicLanguage:E}=(0,A.useContext)(w.BR),{ndk:F,saveForums:I}=(0,A.useContext)(f.gH),O=(0,A.useMemo)((()=>new Array(10).fill(new m.QB)),[]),[G,H]=(0,A.useState)(),[M,$]=(0,A.useState)(!0),[Q,U]=(0,A.useState)(1),Z=[{dataIndex:"read",width:10,render:(e,l,s)=>(0,L.jsx)(a.A,{src:B?void 0:l.tagValue("image"),icon:(0,L.jsx)(p.A,{style:{fontSize:"20px"}})})},{dataIndex:"content",render:(e,l,s)=>{var n,i;return(0,L.jsx)(r.A,{span:24,children:(0,L.jsx)(d.A,{active:!0,loading:!l.id,paragraph:{rows:1,style:{margin:0,marginTop:-5}},title:{style:{marginTop:0}},children:(0,L.jsx)(o.A,{justify:"start",children:(0,L.jsxs)(r.A,{span:24,children:[(0,L.jsx)(o.A,{children:(0,L.jsx)(R,{strong:!0,children:null!==(n=l.tagValue("name"))&&void 0!==n?n:l.tagValue("d")})}),(0,L.jsx)(o.A,{children:(0,L.jsx)(r.A,{span:24,children:(0,L.jsx)(R,{type:"secondary",children:""===(null===l||void 0===l?void 0:l.tagValue("description"))?"-":null!==(i=null===l||void 0===l?void 0:l.tagValue("description"))&&void 0!==i?i:"-"})})})]})})})})}}];(0,A.useEffect)((()=>{_()}),[Q]);const _=e=>{$(!0);let l={kinds:[34550],limit:10};if(G&&!e){var s,n;const e=Array.from(G),i=null!==(s=null===(n=e[e.length-1])||void 0===n?void 0:n.created_at)&&void 0!==s?s:0;l.until=i+1}e&&"all"!==e&&(l={...l,"#l":[e.split("-")[0]]}),F.fetchEvents(l,{closeOnEose:!0}).then((l=>{H((s=>e?[...l]:[...null!==s&&void 0!==s?s:[],...l])),I([...l].reduce(((e,l)=>(l.dTag&&(e[l.encode()]=l,e[l.dTag]=l),e)),{})),$(!1)}))};return(0,L.jsx)(j.UC,{children:(0,L.jsxs)(o.A,{justify:"space-between",children:[(0,L.jsx)(r.A,{xs:24,md:16,children:(0,L.jsxs)(o.A,{gutter:[0,10],children:[(0,L.jsx)(r.A,{span:24,children:(0,L.jsxs)(o.A,{justify:"space-between",children:[(0,L.jsx)(c.A,{items:[{title:(0,L.jsx)("a",{children:"Home"}),onClick:()=>l("/")},{title:s("pages.externalForumList.title")}]}),(0,L.jsxs)(r.A,{children:["all"===z?(0,L.jsx)(v.A,{style:{fontSize:16,marginRight:10}}):(0,L.jsx)(T.A,{countryCode:z.split("-")[1],style:{fontSize:16,marginRight:10}}),(0,L.jsx)(u.A,{showSearch:!0,style:{width:100},size:"small",onChange:e=>{E(e),_(e)},defaultValue:z,filterOption:(e,l)=>{var s;return(null!==(s=null===l||void 0===l?void 0:l.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},options:[{value:"all",label:s("shared.all")},...C.e.filter(((e,l,s)=>l===s.findIndex((l=>l.label===e.label)))).map((e=>({...e,label:s(`language.${e.label}`)})))]})]})]})}),(0,L.jsx)(r.A,{span:"24",children:(0,L.jsx)(j.Ay,{style:{background:n,borderTopLeftRadius:i,borderTopRightRadius:i,paddingBottom:15},children:(0,L.jsx)(o.A,{justify:"space-around",align:"middle",children:(0,L.jsx)(r.A,{span:"20",children:(0,L.jsx)(o.A,{children:(0,L.jsx)(S,{children:s("pages.externalForumList.title")})})})})})}),(0,L.jsx)(r.A,{span:"24",children:(0,L.jsx)(V,{placeholder:"input search text",allowClear:!0,disabled:!0})}),(0,L.jsx)(j.Ay,{style:{background:n,borderRadius:i},children:(0,L.jsx)(x.A,{pagination:!1,columns:Z,dataSource:M?O:[...null!==G&&void 0!==G?G:[]].slice(10*(Q-1),10*Q),onRow:(e,s)=>({onClick:()=>l(`/forum/${e.encode()}`)})})}),(0,L.jsx)(r.A,{span:"24",children:(0,L.jsxs)(o.A,{justify:"space-between",children:[(0,L.jsx)(h.Ay,{type:"link",disabled:Q<2,onClick:()=>U((e=>e-1)),children:s("shared.previous")}),(0,L.jsx)(h.Ay,{type:"link",children:Q}),(0,L.jsx)(h.Ay,{type:"link",disabled:(null!==(e=null===G||void 0===G?void 0:G.length)&&void 0!==e?e:1/0)<10*Q,onClick:()=>U((e=>e+1)),children:s("shared.next")})]})})]})}),(0,L.jsx)(r.A,{xs:0,md:7,children:(0,L.jsxs)(o.A,{gutter:[0,10],style:{marginTop:32},children:[(0,L.jsx)(r.A,{span:24,children:(0,L.jsx)(k.G,{})}),(0,L.jsx)(r.A,{span:24,children:(0,L.jsx)(y.O,{})})]})})]})})}}}]);
//# sourceMappingURL=786.427d1043.chunk.js.map