{"version":3,"file":"static/js/425.08b6a975.chunk.js","mappings":"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","sources":["app/pages/Forum/index.tsx"],"sourcesContent":["import { Avatar, Breadcrumb, Button, Col, Empty, Row, Select, Skeleton, Table, TableColumnsType, Typography, theme } from \"antd\";\nimport SmsIcon from '@mui/icons-material/Sms';\nimport MailIcon from '@mui/icons-material/Mail';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport NoteAddIcon from '@mui/icons-material/NoteAdd';\nimport PeopleAltIcon from '@mui/icons-material/PeopleAlt';\nimport LanguageIcon from '@mui/icons-material/Language';\nimport WhatshotIcon from '@mui/icons-material/Whatshot';\nimport AdminPanelSettingsIcon from '@mui/icons-material/AdminPanelSettings';\nimport Layout, { Content } from \"antd/es/layout/layout\"\nimport { useTranslation } from \"react-i18next\";\nimport { format, formatDistanceToNow, fromUnixTime } from \"date-fns\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useContext, useEffect, useMemo, useState } from \"react\";\nimport { UseNostrStoreType, NostrContext } from \"app/contexts/NostrContext\";\nimport { NDKEvent, NDKFilter, NDKRelaySet, NDKUser, filterForEventsTaggingId, profileFromEvent } from \"@nostr-dev-kit/ndk\";\nimport { ActiveUser } from \"app/components/ActiveUser\";\nimport { ForumsButtons } from \"app/components/ForumsButtons\";\nimport { AppContext, UseAppStoreType } from \"app/contexts/AppContext\";\nimport { languages } from \"../../../constants\";\nimport ReactCountryFlag from \"react-country-flag\";\n\nconst { Text, Title, Link } = Typography;\n\nexport const Forum: () => JSX.Element = () => {\n  const { topicLanguage, setTopicLanguage } = useContext<UseAppStoreType>(AppContext);\n  const { turtleMode } = useContext<UseAppStoreType>(AppContext);\n  const { ndk, authors, saveAuthors, comments, saveComments, reactions, saveReactions, saveTopics, saveForums, forums, getBaseRelays } = useContext<UseNostrStoreType>(NostrContext);\n  const {\n    token: { colorBgContainer, borderRadiusLG },\n  } = theme.useToken();\n  const { naddr } = useParams();\n  const { t } = useTranslation()\n  const navigate = useNavigate();\n\n  const [forumEvent, setForumEvent] = useState<NDKEvent>()\n  const [title, setTitle] = useState<string>()\n  const [description, setDescription] = useState<string>()\n  const [topicEvents, setTopicEvents] = useState<Set<NDKEvent>>()\n\n  const [hotRopics, setHotTopics] = useState<Set<NDKEvent>>()\n  const [acceptedTopics, setAcceptedTopics] = useState<string[]>()\n  const [isModerated, setIsModerated] = useState<boolean>(true)\n\n  const [loadingPage, setLoadingPage] = useState<boolean>(true)\n  const [loadingAuthors, setLoadingAuthors] = useState<boolean>(true)\n  const [loadingComments, setLoadingComments] = useState<boolean>(true)\n  const [loadingReactions, setLoadingReactions] = useState<boolean>(true)\n  const [loadingHotTopics, setLoadingHotTopics] = useState<boolean>(true)\n  const [loadingModerators, setLoadingModerators] = useState<boolean>(true)\n  const [page, setPage] = useState<number>(1)\n  const pageSize = 10\n\n  const skeletonList = useMemo(() => new Array(10).fill(new NDKEvent()), [])\n\n  const columns: TableColumnsType<NDKEvent> = [\n    {\n      dataIndex: 'content',\n      render: (_text, record, i) => {\n        const date = fromUnixTime(parseInt(record.tagValue(\"published_at\") ?? record.created_at?.toString() ?? \"0\", 10));\n        const relativeTime = formatDistanceToNow(date, { addSuffix: true });\n        const profile = authors?.[record.pubkey]\n        const loadingModerations = isModerated && !acceptedTopics\n        return (\n          <Col span={24}>\n            <Row>\n              <Col xs={0} md={3} style={{ maxWidth: 40 }}>\n                <Row align=\"middle\">\n                  <MailIcon />\n                </Row>\n              </Col>\n              <Col xs={24} md={21}>\n                <Row>\n                  <Col span={24}>\n                    <Skeleton loading={(!record.tagValue(\"title\") && !record.tagValue(\"d\")) || loadingModerations} active paragraph={{ rows: 1, style: { margin: 0 } }} title={false} >\n                      <Text strong>{record.tagValue(\"title\") ?? record.tagValue(\"d\") ?? '-'}</Text>\n                    </Skeleton>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col span={24}>\n                    <Skeleton loading={loadingAuthors || loadingModerations} active paragraph={{ rows: 1, style: { margin: 0, marginTop: 8 } }} title={false} >\n                      <Col xs={0} md={24}>\n                        <Text type=\"secondary\">\n                          {`@${profile?.displayName ?? profile?.name ?? t(\"shared.events.anonymous\")} - ${t(\"shared.events.published_at\", { date: relativeTime })}`}\n                        </Text>\n                      </Col>\n                      <Col xs={24} md={0}>\n                        <Text type=\"secondary\">\n                          {`@${profile?.displayName ?? profile?.name ?? t(\"shared.events.anonymous\")} - ${format(date, 'yy/MM/dd')}`}\n                        </Text>\n                      </Col>\n                    </Skeleton>\n                  </Col>\n                </Row>\n              </Col>\n            </Row>\n          </Col>\n\n        )\n      }\n    },\n    {\n      dataIndex: 'likes',\n      width: 15,\n      render: (text, record, index) => {\n        if (turtleMode) return <></>\n        const loadingModerations = isModerated && !acceptedTopics\n        return (\n          <Row>\n            <Col span={24}>\n              <Row justify=\"center\">\n                <FavoriteIcon />\n              </Row>\n              <Row justify=\"center\">\n                <Skeleton loading={(!reactions[record?.dTag ?? ''] && loadingReactions) || loadingModerations} active paragraph={{ rows: 1, style: { margin: 0, marginTop: 6 }, width: 25 }} title={false} >\n                  {reactions[record?.dTag ?? '']?.length ?? 0}\n                </Skeleton>\n              </Row>\n            </Col>\n          </Row>\n        )\n      },\n    },\n    {\n      dataIndex: 'count',\n      width: 15,\n      render: (text, record, index) => {\n        if (turtleMode) return <></>\n        const loadingModerations = isModerated && !acceptedTopics\n        return (\n          <Row justify=\"space-between\">\n            <Col span={24}>\n              <Row justify=\"center\">\n                <SmsIcon />\n              </Row>\n              <Row justify=\"center\">\n                <Skeleton loading={(!comments[record?.dTag ?? ''] && loadingComments) || loadingModerations} active paragraph={{ rows: 1, style: { margin: 0, marginTop: 6 }, width: 25 }} title={false} >\n                  {comments[record?.dTag ?? '']?.length ?? 0}\n                </Skeleton>\n              </Row>\n            </Col>\n          </Row>\n        )\n      },\n    },\n  ]\n\n  useEffect(() => {\n    if (naddr && naddr !== 'all') {\n      if (forums[naddr]) setForumEvent(forums[naddr])\n      ndk.fetchEvent(naddr, { closeOnEose: true }, getForumRelaySet()).then((event) => {\n        if (event?.dTag) {\n          setForumEvent(event)\n          saveForums({ [naddr]: event, [event.dTag]: event })\n        }\n      })\n    }\n\n\n    return () => {\n      setForumEvent(undefined)\n    }\n  }, [])\n\n  useEffect(() => {\n    getTopicEvents()\n  }, [page])\n\n  useEffect(() => {\n    if (forumEvent) {\n      setTitle(forumEvent?.tagValue(\"name\") ?? forumEvent.tagValue(\"d\"))\n      setDescription(forumEvent?.tagValue(\"description\") ?? \"\")\n      getLatestComments()\n      getModerators()\n    } else if (naddr === 'all') {\n      setTitle(t(\"pages.forums.list.all.name\"))\n      setDescription(t(\"pages.forums.list.all.description\"))\n      setIsModerated(false)\n    }\n  }, [forumEvent])\n\n  const getForumRelaySet = (): NDKRelaySet => {\n    const relays: string[] = getBaseRelays()\n\n    forumEvent?.onRelays.forEach(r => relays.push(r.url))\n\n    return NDKRelaySet.fromRelayUrls(relays, ndk, true)\n  }\n\n  const getLatestComments = (): void => {\n    if (turtleMode) return\n\n    setLoadingHotTopics(true)\n    if (forumEvent) {\n      ndk.fetchEvents({ kinds: [1], '#a': [forumEvent.tagReference()[1]], limit: 10 }, { closeOnEose: true }, getForumRelaySet()).then((newEvents) => {\n        const hotRopicsTags = [...newEvents].map(e => e.tags.find(t => t[0] === 'a' && t[1].startsWith('30023:')))\n        const hotTopicD: string[] = hotRopicsTags.map(t => t?.[1].split(':')?.[2] ?? '')\n        const uniqueDTags = Array.from(new Set(hotTopicD))\n        ndk.fetchEvents({ kinds: [30023], '#d': uniqueDTags }, {}, getForumRelaySet()).then((newEvents) => {\n          setHotTopics(newEvents)\n          setLoadingHotTopics(false)\n          saveTopics([...newEvents].reduce((accumulator, event) => {\n            if (event.dTag) accumulator[event.encode()] = event\n            return accumulator;\n          }, {}))\n        })\n      })\n    } else {\n      setLoadingHotTopics(false)\n    }\n  }\n\n  const getTopicEvents = (newLang?: string): void => {\n    setLoadingPage(true)\n    setLoadingAuthors(true)\n    setLoadingComments(true)\n    setLoadingReactions(true)\n\n    let filters: NDKFilter = { kinds: [30023], limit: pageSize }\n\n    if (topicEvents && !newLang) {\n      const array = Array.from(topicEvents);\n      const until = array[array.length - 1]?.created_at ?? 0\n      filters.until = until + 1\n    }\n\n    if (naddr) filters = { ...filters, ...filterForEventsTaggingId(naddr) }\n    if (newLang) {\n      if (newLang !== 'all') filters = { ...filters, '#l': [(topicLanguage ?? newLang).split(\"-\")[0]] }\n    } else if (topicLanguage !== 'all') {\n      filters = { ...filters, '#l': [(topicLanguage ?? newLang).split(\"-\")[0]] }\n    }\n\n    ndk.fetchEvents(filters, { closeOnEose: true }, getForumRelaySet()).then((newEvents) => {\n      setTopicEvents(events => {\n        return new Set<NDKEvent>(newLang ? newEvents : [...events ?? [], ...newEvents])\n      })\n      saveTopics([...newEvents].reduce((accumulator, event) => {\n        if (event.dTag) accumulator[event.encode()] = event\n        return accumulator;\n      }, {}))\n      getTopicEventsMeta(newEvents)\n      setLoadingPage(false)\n    })\n      .catch(() => {\n        setLoadingPage(false)\n        setTopicEvents(new Set())\n      })\n  }\n\n  const getModerators = (): void => {\n    if (forumEvent) {\n      setLoadingModerators(true)\n      const pets = forumEvent.getMatchingTags('p')\n      if (pets.length > 0) {\n        setIsModerated(true)\n        const authors = pets.map(p => p[1])\n        if (!turtleMode) {\n          ndk\n            .fetchEvents({ kinds: [0], authors }, { closeOnEose: true, groupable: true }, getForumRelaySet())\n            .then((eventsList) => {\n              const authors = {}\n              eventsList.forEach((event) => {\n                authors[event.pubkey] = profileFromEvent(event)\n              })\n              saveAuthors(authors)\n              setLoadingModerators(false)\n            })\n        } else {\n          setLoadingModerators(false)\n        }\n        ndk\n          // @ts-expect-error\n          .fetchEvents({ kinds: [4550], authors }, { closeOnEose: true }, getForumRelaySet())\n          .then((eventsList) => {\n            const eventIds: string[] = []\n            if (eventsList) {\n              [...eventsList].forEach(e => {\n                // @ts-expect-error\n                const aTag: string[] = e.getMatchingTags('a')\n                if (aTag[1]) eventIds.push(aTag[1])\n              })\n            }\n            setAcceptedTopics(eventIds)\n          })\n          .catch(() => setAcceptedTopics([]))\n      } else {\n        setIsModerated(false)\n      }\n    }\n  }\n\n  const getTopicEventsMeta = (events: Set<NDKEvent>): void => {\n    const authors: string[] = []\n    if (authors.length > 0) {\n      ndk\n        .fetchEvents({ kinds: [0], authors }, { closeOnEose: true, groupable: true }, getForumRelaySet())\n        .then((eventsList) => {\n          const authors = {}\n          eventsList.forEach((event) => {\n            authors[event.pubkey] = profileFromEvent(event)\n          })\n          saveAuthors(authors)\n          setLoadingAuthors(false)\n        })\n    } else {\n      setLoadingAuthors(false)\n    }\n    if (!turtleMode) {\n      events.forEach(event => {\n        const dTag = event.dTag?.toString()\n        if (dTag) {\n          ndk\n            .fetchEvents({ kinds: [1, 7], \"#a\": [`30023:${event.pubkey}:${dTag}`] }, { groupable: true }, getForumRelaySet())\n            .then((events) => {\n              const commList: NDKEvent[] = []\n              const reactList: NDKEvent[] = []\n              events.forEach(event => {\n                switch (event.kind) {\n                  case 1:\n                    commList.push(event)\n                    break;\n                  case 7:\n                    reactList.push(event)\n                    break;\n                  default:\n                    break;\n                }\n              })\n              saveComments({ [dTag]: commList })\n              saveReactions({ [dTag]: reactList })\n              setLoadingReactions(false)\n              setLoadingComments(false)\n            })\n        }\n      })\n    }\n  }\n\n  const changeTopicLanguage = (value: string): void => {\n    setTopicLanguage(value)\n    getTopicEvents(value)\n  }\n\n  return (\n    <Content>\n      <Row justify='space-between' gutter={[0, 10]}>\n        <Col xs={24} md={16}>\n          <Row gutter={[0, 10]} >\n            <Col span={24}>\n              <Row justify=\"space-between\">\n                <Breadcrumb\n                  items={[\n                    {\n                      title: <a>Home</a>,\n                      onClick: () => navigate('/')\n                    },\n                    {\n                      title: title ?? <Skeleton paragraph={{ rows: 1, style: { marginTop: 0 } }} title={false} />,\n                    },\n                  ]}\n                />\n                <Col>\n                  {topicLanguage === 'all' ? (\n                    <LanguageIcon style={{ fontSize: 16, marginRight: 10 }} />\n                  ) : (\n                    <ReactCountryFlag\n                      countryCode={topicLanguage.split('-')[1]}\n                      style={{ fontSize: 16, marginRight: 10 }}\n                    />\n                  )}\n                  <Select\n                    showSearch\n                    style={{ width: 100 }}\n                    size=\"small\"\n                    onChange={changeTopicLanguage}\n                    defaultValue={topicLanguage}\n                    filterOption={(input, option) =>\n                      (option?.label as string ?? '').toLowerCase().includes(input.toLowerCase())\n                    }\n                    options={\n                      [\n                        { value: 'all', label: t('shared.all') },\n                        ...languages\n                          .filter((item, index, self) =>\n                            index === self.findIndex((t) => t.label === item.label)\n                          )\n                          .map(lang => {\n                            return { ...lang, label: t(`language.${lang.label}`) }\n                          }),\n                      ]\n                    }\n                  />\n                </Col>\n              </Row>\n            </Col>\n            <Col span='24'>\n              <Layout\n                style={{ background: colorBgContainer, borderTopLeftRadius: borderRadiusLG, borderTopRightRadius: borderRadiusLG, paddingBottom: 15 }}\n              >\n                <Row justify='space-between' align=\"middle\">\n                  <Col span='1' />\n                  <Col span='16'>\n                    <Skeleton active loading={!title && !description} paragraph={{ rows: 1 }} style={{ marginTop: 26 }} >\n                      <Row>\n                        <Title>{title}</Title>\n                      </Row>\n                      <Row>\n                        <Text type=\"secondary\">{description}</Text>\n                      </Row>\n                    </Skeleton>\n                  </Col>\n                  <Col xs={0} md={4}>\n                    <Row justify=\"end\">\n                      <Button type=\"primary\" htmlType=\"submit\" size=\"large\" icon={<NoteAddIcon />} iconPosition=\"end\" onClick={() => navigate(`/forum/${naddr}/new`)}>\n\n                        <Col xs={0} md={20}>\n                          {t('pages.forum.createTopic')}\n                        </Col>\n                      </Button>\n                    </Row>\n                  </Col>\n                  <Col span='1' />\n                </Row>\n              </Layout>\n            </Col>\n            <Col span='24'>\n              <Layout\n                style={{ background: colorBgContainer, borderRadius: borderRadiusLG }}\n              >\n                <Table\n                  pagination={false}\n                  columns={columns}\n                  dataSource={loadingPage || (isModerated && !acceptedTopics)\n                    ? skeletonList\n                    : [...topicEvents ?? []]\n                      .filter(e => !isModerated || acceptedTopics?.includes(e.dTag ?? ''))\n                      .slice(((page - 1) * pageSize), page * pageSize)}\n                  onRow={(record, _rowIndex) => {\n                    return {\n                      onClick: () => navigate(`/topic/${record.encode()}`)\n                    };\n                  }}\n                />\n              </Layout>\n            </Col>\n            <Col span='24'>\n              <Row justify=\"space-between\">\n                <Button type=\"link\" disabled={page < 2} onClick={() => setPage(p => p - 1)}>{t(\"shared.previous\")}</Button>\n                <Button type=\"link\">{page}</Button>\n                <Button type=\"link\" disabled={(topicEvents?.size ?? Infinity) < page * pageSize} onClick={() => setPage(p => p + 1)}>{t(\"shared.next\")}</Button>\n              </Row>\n            </Col>\n          </Row>\n        </Col>\n        <Col xs={24} md={7}>\n          <Row gutter={[0, 10]} style={{ marginTop: 32 }} >\n            <Col xs={0} md={24}>\n              <ActiveUser />\n            </Col>\n            <Col xs={0} md={24}>\n              <ForumsButtons />\n            </Col>\n            <Col span={24}>\n              {!turtleMode && naddr !== 'all' && (\n                <Layout\n                  style={{ padding: '24px 0', background: colorBgContainer, borderRadius: borderRadiusLG }}\n                >\n                  <Row justify=\"space-around\">\n                    <Col span='16'>\n                      <Title level={2}>\n                        <WhatshotIcon />\n                        {t('pages.forum.hotRopics')}\n                      </Title>\n                    </Col>\n                  </Row>\n                  <Row justify=\"space-around\">\n                    <Col span='16'>\n                      <Skeleton active loading={loadingHotTopics} title={false} paragraph={{ rows: 5 }}>\n                        {[...(hotRopics ?? [])].map((topic, i) => {\n                          if (!topic.tagValue(\"title\")) return <></>\n                          return (\n                            <Row key={i} justify='space-between' onClick={() => navigate(`/topic/${topic.encode()}`)}>\n                              <Col style={{ overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis' }}>\n                                <Link strong>\n                                  {topic.tagValue(\"title\") ?? topic.tagValue(\"d\") ?? '-'}\n                                </Link>\n                              </Col>\n                              <Col>\n                                <Text>{formatDistanceToNow(fromUnixTime(parseInt(topic?.tagValue(\"published_at\") ?? topic?.created_at?.toString() ?? \"0\", 10)), { addSuffix: true })}</Text>\n                              </Col>\n                            </Row>\n                          )\n                        })}\n                        {hotRopics?.size === 0 ? <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} /> : <></>}\n                      </Skeleton>\n                    </Col>\n                  </Row>\n                </Layout>\n              )}\n            </Col>\n            <Col span={24}>\n              {!turtleMode && naddr !== 'all' && (\n                <Layout\n                  style={{ padding: '24px 0', background: colorBgContainer, borderRadius: borderRadiusLG }}\n                >\n                  <Row justify=\"space-around\">\n                    <Col span='16'>\n                      <Title level={2}>\n                        <AdminPanelSettingsIcon />\n                        {t('pages.forum.moderators')}\n                      </Title>\n                    </Col>\n                  </Row>\n                  <Row justify=\"space-around\">\n                    <Col span='16'>\n                      <Skeleton active loading={!forumEvent && loadingModerators} title={false} paragraph={{ rows: 3 }}>\n                        {[...(forumEvent?.getMatchingTags('p') ?? [])].map((tag, i) => {\n                          if (!tag[1]) return <></>\n\n                          const profile = authors[tag[1]]\n                          const author = new NDKUser({ hexpubkey: tag[1] })\n                          return (\n                            <Row key={i} justify='space-between'>\n                              <Col style={{ overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis' }}>\n                                <Avatar src={profile?.image} icon={<PeopleAltIcon style={{ fontSize: '20px' }} />} />\n                                <Link strong href={`https://njump.me/${author.npub}`} target=\"_blank\" style={{ marginLeft: 5 }}>\n                                  {profile?.name ?? tag[1] ?? '-'}\n                                </Link>\n                              </Col>\n                            </Row>\n                          )\n                        })}\n                        {!isModerated ?\n                          <Text strong style={{ marginLeft: 5 }}>\n                            {t('pages.forum.noModerators')}\n                          </Text>\n                          : <></>}\n                      </Skeleton>\n                    </Col>\n                  </Row>\n                </Layout>\n              )}\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </Content>\n  )\n}\n"],"names":["Text","Title","Link","Typography","Forum","_topicEvents$size","_forumEvent$getMatchi","topicLanguage","setTopicLanguage","useContext","AppContext","turtleMode","ndk","authors","saveAuthors","comments","saveComments","reactions","saveReactions","saveTopics","saveForums","forums","getBaseRelays","NostrContext","token","colorBgContainer","borderRadiusLG","theme","useToken","naddr","useParams","t","useTranslation","navigate","useNavigate","forumEvent","setForumEvent","useState","title","setTitle","description","setDescription","topicEvents","setTopicEvents","hotRopics","setHotTopics","acceptedTopics","setAcceptedTopics","isModerated","setIsModerated","loadingPage","setLoadingPage","loadingAuthors","setLoadingAuthors","loadingComments","setLoadingComments","loadingReactions","setLoadingReactions","loadingHotTopics","setLoadingHotTopics","loadingModerators","setLoadingModerators","page","setPage","skeletonList","useMemo","Array","fill","NDKEvent","columns","dataIndex","render","_text","record","i","_ref","_record$tagValue","_record$created_at","_ref2","_record$tagValue2","_ref3","_profile$displayName","_ref4","_profile$displayName2","date","fromUnixTime","parseInt","tagValue","created_at","toString","relativeTime","formatDistanceToNow","addSuffix","profile","pubkey","loadingModerations","_jsx","Col","span","children","_jsxs","Row","xs","md","style","maxWidth","align","MailIcon","Skeleton","loading","active","paragraph","rows","margin","strong","marginTop","type","displayName","name","format","width","text","index","_record$dTag","_reactions$length","_reactions","_record$dTag2","_Fragment","justify","FavoriteIcon","dTag","length","_record$dTag3","_comments$length","_comments","_record$dTag4","SmsIcon","useEffect","fetchEvent","closeOnEose","getForumRelaySet","then","event","undefined","getTopicEvents","_forumEvent$tagValue","_forumEvent$tagValue2","getLatestComments","getModerators","relays","onRelays","forEach","r","push","url","NDKRelaySet","fromRelayUrls","fetchEvents","kinds","tagReference","limit","newEvents","hotRopicsTags","map","e","tags","find","startsWith","hotTopicD","_t$1$split$","_t$1$split","split","uniqueDTags","from","Set","reduce","accumulator","encode","newLang","filters","_array$created_at","_array","array","until","filterForEventsTaggingId","events","getTopicEventsMeta","catch","pets","getMatchingTags","p","groupable","eventsList","profileFromEvent","eventIds","aTag","_event$dTag","commList","reactList","kind","Content","gutter","Breadcrumb","items","onClick","LanguageIcon","fontSize","marginRight","ReactCountryFlag","countryCode","Select","showSearch","size","onChange","value","defaultValue","filterOption","input","option","_ref5","label","toLowerCase","includes","options","languages","filter","item","self","findIndex","lang","Layout","background","borderTopLeftRadius","borderTopRightRadius","paddingBottom","Button","htmlType","icon","NoteAddIcon","iconPosition","borderRadius","Table","pagination","dataSource","_e$dTag","slice","onRow","_rowIndex","disabled","Infinity","ActiveUser","ForumsButtons","padding","level","WhatshotIcon","topic","_ref6","_topic$tagValue","_ref7","_topic$tagValue2","_topic$created_at","overflow","whiteSpace","textOverflow","Empty","image","PRESENTED_IMAGE_SIMPLE","AdminPanelSettingsIcon","tag","_ref8","_profile$name","author","NDKUser","hexpubkey","Avatar","src","PeopleAltIcon","href","npub","target","marginLeft"],"sourceRoot":""}