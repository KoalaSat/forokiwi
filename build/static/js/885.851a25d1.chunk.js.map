{"version":3,"file":"static/js/885.851a25d1.chunk.js","mappings":"6SAqBO,SAASA,EAAYC,GAC1B,OAAOC,KAAKC,QAAOC,EAAAA,EAAAA,GAAOH,GAAQ,IACpC,C,uBCXA,MAAM,MAAEI,GAAUC,EAAAA,EAELC,EAA8BA,KACzC,MAAM,IAAEC,EAAG,WAAEC,EAAU,OAAEC,EAAM,WAAEC,IAAeC,EAAAA,EAAAA,YAA8BC,EAAAA,KACxE,EAAEC,IAAMC,EAAAA,EAAAA,MACR,MAAEC,IAAUC,EAAAA,EAAAA,KACZC,GAAWC,EAAAA,EAAAA,OAEfC,OAAO,iBAAEC,EAAgB,eAAEC,IACzBC,EAAAA,EAAMC,YACHC,EAASC,IAAcC,EAAAA,EAAAA,aACvBC,EAAYC,IAAiBF,EAAAA,EAAAA,aAC7BG,EAAOC,IAAYJ,EAAAA,EAAAA,aACnBK,EAAYC,IAAiBN,EAAAA,EAAAA,aAEpCO,EAAAA,EAAAA,YAAU,KACJlB,GAAmB,QAAVA,IACPN,EAAOM,IAAQiB,EAAcvB,EAAOM,IACxCR,EAAI2B,WAAWnB,EAAO,CAAEoB,aAAa,IAAQC,MAAMC,IACxC,OAALA,QAAK,IAALA,GAAAA,EAAOC,OACTN,EAAcK,GACd3B,EAAW,CAAE,CAACK,GAAQsB,EAAO,CAACA,EAAMC,MAAOD,IAC7C,KAKG,KACLL,OAAcO,EAAU,IAEzB,KAEHN,EAAAA,EAAAA,YAAU,KACS,IAADO,EAAZT,GACFH,EAA0C,QAA7BY,EAAW,OAAVT,QAAU,IAAVA,OAAU,EAAVA,EAAYU,SAAS,eAAO,IAAAD,EAAAA,EAAIT,EAAWU,SAAS,KACpE,GACC,CAACV,IA0BJ,OACEW,EAAAA,EAAAA,KAACC,EAAAA,GAAO,CAAAC,UACNC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,QAAQ,gBAAeH,SAAA,EAC1BF,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAG,KAAIN,UAClBC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACK,OAAQ,CAAC,EAAG,IAAIP,SAAA,EACnBF,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACI,KAAM,GAAGR,UACZF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAAAF,UACFF,EAAAA,EAAAA,KAACW,EAAAA,EAAU,CACTC,MAAO,CACL,CACEzB,OAAOa,EAAAA,EAAAA,KAAA,KAAAE,SAAG,SACVW,QAASA,IAAMtC,EAAS,MAE1B,CACEY,MAAOF,GAAae,EAAAA,EAAAA,KAAA,KAAAE,SAAIjB,KAAkBe,EAAAA,EAAAA,KAACc,EAAAA,EAAQ,CAACC,UAAW,CAAEC,KAAM,EAAGC,MAAO,GAAIC,MAAO,CAAEC,UAAW,IAAOhC,OAAO,IACvH0B,QAASA,IAAMtC,EAAS,UAAoB,OAAVc,QAAU,IAAVA,GAAAA,EAAY+B,KAAO/B,EAAWgC,SAAW,UAE7E,CACElC,MAAOhB,EAAE,uCAMnB6B,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACI,KAAK,KAAIR,UACZF,EAAAA,EAAAA,KAACsB,EAAAA,GAAM,CACLJ,MAAO,CAAEK,WAAY7C,EAAkB8C,aAAc7C,EAAgB8C,QAAS,UAAWvB,UAEzFC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,QAAQ,eAAeI,OAAQ,CAAC,EAAG,IAAIP,SAAA,EAC1CC,EAAAA,EAAAA,MAACG,EAAAA,EAAG,CAACI,KAAK,KAAIR,SAAA,EACZF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAAAF,UACFF,EAAAA,EAAAA,KAACtC,EAAK,CAACgE,MAAO,EAAExB,SAAE/B,EAAE,6BAEtB6B,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAAAF,UACFF,EAAAA,EAAAA,KAAC2B,EAAAA,EAAK,CAACC,SAAWC,GAAMzC,EAASyC,EAAEC,OAAOC,eAG9C5B,EAAAA,EAAAA,MAACG,EAAAA,EAAG,CAACI,KAAK,KAAIR,SAAA,EACZF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAAAF,UACFF,EAAAA,EAAAA,KAACtC,EAAK,CAACgE,MAAO,EAAExB,SAAE/B,EAAE,+BAEtB6B,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAAAF,UACFF,EAAAA,EAAAA,KAACgC,EAAAA,EAAQ,CAAChB,KAAM,GAAIY,SAAWC,GAAM9C,EAAW8C,EAAEC,OAAOC,eAG7D/B,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACI,KAAK,KAAIR,UACZF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAACC,QAAQ,MAAKH,UAChBF,EAAAA,EAAAA,KAACiC,EAAAA,GAAM,CAACC,UAAWpD,GAAuB,KAAZA,IAAmBK,GAAmB,KAAVA,EAAcgD,KAAK,UAAUC,SAAS,SAASC,KAAK,QAAQC,MAAMtC,EAAAA,EAAAA,KAACuC,EAAAA,EAAW,IAAKC,aAAa,MAAM3B,QAvEhK4B,UAClB,GAAIpE,GAASS,GAAWK,EAAO,CAAC,IAADuD,EAC7B,MAAMC,EAA0C,QAAlCD,GAAGE,EAAAA,EAAAA,IAAyBvE,UAAM,IAAAqE,OAAA,EAA/BA,EAAkC,MACnD,GAAY,OAARC,QAAQ,IAARA,GAAAA,EAAW,GAAI,CACjB,MAAME,EAAa,IAAIC,EAAAA,GAASjF,GAChCgF,EAAWzB,KAAO,MAClByB,EAAW/D,QAAUA,QACf+D,EAAWE,eACjBF,EAAWG,KAAKC,KAAK,CAAC,IAAa,OAARN,QAAQ,IAARA,OAAQ,EAARA,EAAW,KACtCE,EAAWG,KAAKC,KAAK,CAAC,QAAS9D,IAC/B0D,EAAWG,KAAKC,KAAK,CAAC,eAAgB5F,EAAY,IAAI6F,MAAQC,aAC9DN,EACGO,UACA1D,MAAM2D,IACL,GAAIA,GAAUR,EAAWjD,KAAM,CAC7B,MAAM0D,EAAWT,EAAWxB,SAC5BvD,EAAW,CAAE,CAAC+E,EAAWjD,MAAOiD,IAChCtE,EAAS,UAAU+E,IACrB,IAEN,CACF,GAkDuMpD,SAClL/B,EAAE,iDASnB6B,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACC,GAAI,EAAGC,GAAG,IAAGN,UAChBF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAACK,OAAQ,CAAC,EAAG,IAAKS,MAAO,CAAEC,UAAW,IAAKjB,UAC7CF,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACI,KAAM,GAAGR,UACZF,EAAAA,EAAAA,KAACuD,EAAAA,EAAU,cAKX,C,qBCxIVC,EAAyBC,EAAQ,MAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBH,EAAuBC,EAAQ,KAChDG,EAAcH,EAAQ,KACXC,EAAQ,GAAU,EAAIC,EAAeE,UAAuB,EAAID,EAAYE,KAAK,OAAQ,CACtGC,EAAG,+HACD,U,0DCVJ,QADqB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,ugBAA2gB,KAAQ,SAAU,MAAS,Y,cCM9rBC,EAAiB,SAAwBC,EAAOC,GAClD,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,GAAS,CAAC,EAAGJ,EAAO,CACpEC,IAAKA,EACL5B,KAAMgC,IAEV,EAOA,QAJ2BH,EAAAA,WAAiBH,E,iBCiBrC,SAASvG,EAAO8G,GACrB,MAAMC,EAASC,OAAOC,UAAUvB,SAASwB,KAAKJ,GAG9C,OACEA,aAAoBrB,MACC,kBAAbqB,GAAoC,kBAAXC,EAG1B,IAAID,EAASK,aAAaL,GAEb,kBAAbA,GACI,oBAAXC,GACoB,kBAAbD,GACI,oBAAXC,EAGO,IAAItB,KAAKqB,GAGT,IAAIrB,KAAK2B,IAEpB,C","sources":["../node_modules/date-fns/getUnixTime.mjs","app/pages/NewTopic/index.tsx","../node_modules/@mui/icons-material/NoteAdd.js","../node_modules/@ant-design/icons-svg/es/asn/SearchOutlined.js","../node_modules/antd/node_modules/@ant-design/icons/es/icons/SearchOutlined.js","../node_modules/date-fns/toDate.mjs"],"sourcesContent":["import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getUnixTime\n * @category Timestamp Helpers\n * @summary Get the seconds timestamp of the given date.\n *\n * @description\n * Get the seconds timestamp of the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The timestamp\n *\n * @example\n * // Get the timestamp of 29 February 2012 11:45:05 CET:\n * const result = getUnixTime(new Date(2012, 1, 29, 11, 45, 5))\n * //=> 1330512305\n */\nexport function getUnixTime(date) {\n  return Math.trunc(+toDate(date) / 1000);\n}\n\n// Fallback for modularized imports:\nexport default getUnixTime;\n","import { Breadcrumb, Button, Col, Input, Row, Skeleton, Typography, theme } from \"antd\";\nimport Layout, { Content } from \"antd/es/layout/layout\"\nimport { useTranslation } from \"react-i18next\";\nimport NoteAddIcon from '@mui/icons-material/NoteAdd';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport TextArea from \"antd/es/input/TextArea\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { UseNostrStoreType, NostrContext } from \"app/contexts/NostrContext\";\nimport { NDKEvent, filterForEventsTaggingId } from \"@nostr-dev-kit/ndk\";\nimport { getUnixTime } from \"date-fns\";\nimport { ActiveUser } from \"app/components/ActiveUser\";\n\nconst { Title } = Typography;\n\nexport const NewTopic: () => JSX.Element = () => {\n  const { ndk, saveTopics, forums, saveForums } = useContext<UseNostrStoreType>(NostrContext);\n  const { t } = useTranslation()\n  const { naddr } = useParams();\n  const navigate = useNavigate();\n  const {\n    token: { colorBgContainer, borderRadiusLG },\n  } = theme.useToken();\n  const [content, setContent] = useState<string>()\n  const [forumTitle, setForumTitle] = useState<string>()\n  const [title, setTitle] = useState<string>()\n  const [forumEvent, setForumEvent] = useState<NDKEvent>()\n\n  useEffect(() => {\n    if (naddr && naddr !== 'all') {\n      if (forums[naddr]) setForumEvent(forums[naddr])\n      ndk.fetchEvent(naddr, { closeOnEose: true }).then((event) => {\n        if (event?.dTag) {\n          setForumEvent(event)\n          saveForums({ [naddr]: event, [event.dTag]: event })\n        }\n      })\n    }\n\n\n    return () => {\n      setForumEvent(undefined)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (forumEvent) {\n      setForumTitle(forumEvent?.tagValue(\"name\") ?? forumEvent.tagValue(\"d\"))\n    }\n  }, [forumEvent])\n\n  const createTopic = async (): Promise<void> => {\n    if (naddr && content && title) {\n      const forumTag = filterForEventsTaggingId(naddr)?.['#a']\n      if (forumTag?.[0]) {\n        const topicEvent = new NDKEvent(ndk)\n        topicEvent.kind = 30023\n        topicEvent.content = content\n        await topicEvent.generateTags()\n        topicEvent.tags.push(['a', forumTag?.[0]])\n        topicEvent.tags.push(['title', title])\n        topicEvent.tags.push(['published_at', getUnixTime(new Date()).toString()])\n        topicEvent\n          .publish()\n          .then((result) => {\n            if (result && topicEvent.dTag) {\n              const newNaddr = topicEvent.encode()\n              saveTopics({ [topicEvent.dTag]: topicEvent })\n              navigate(`/topic/${newNaddr}`)\n            }\n          })\n      }\n    }\n  }\n\n  return (\n    <Content>\n      <Row justify='space-between'>\n        <Col xs={24} md='16'>\n          <Row gutter={[0, 10]} >\n            <Col span={24}>\n              <Row>\n                <Breadcrumb\n                  items={[\n                    {\n                      title: <a>Home</a>,\n                      onClick: () => navigate('/')\n                    },\n                    {\n                      title: forumTitle ? <a>{forumTitle}</a> : <Skeleton paragraph={{ rows: 1, width: 55, style: { marginTop: 0 } }} title={false} />,\n                      onClick: () => navigate(`/forum/${forumEvent?.kind ? forumEvent.encode() : 'all'}`)\n                    },\n                    {\n                      title: t('pages.newTopic.createTopic'),\n                    },\n                  ]}\n                />\n              </Row>\n            </Col>\n            <Col span='24'>\n              <Layout\n                style={{ background: colorBgContainer, borderRadius: borderRadiusLG, padding: '15px 0' }}\n              >\n                <Row justify='space-around' gutter={[0, 10]} >\n                  <Col span='22'>\n                    <Row>\n                      <Title level={2}>{t('pages.newTopic.title')}</Title>\n                    </Row>\n                    <Row>\n                      <Input onChange={(v) => setTitle(v.target.value)} />\n                    </Row>\n                  </Col>\n                  <Col span='22'>\n                    <Row>\n                      <Title level={2}>{t('pages.newTopic.content')}</Title>\n                    </Row>\n                    <Row>\n                      <TextArea rows={10} onChange={(v) => setContent(v.target.value)} />\n                    </Row>\n                  </Col>\n                  <Col span='22'>\n                    <Row justify=\"end\">\n                      <Button disabled={!content || content === '' || !title || title === ''} type=\"primary\" htmlType=\"submit\" size=\"large\" icon={<NoteAddIcon />} iconPosition=\"end\" onClick={createTopic}>\n                        {t('pages.newTopic.createTopic')}\n                      </Button>\n                    </Row>\n                  </Col>\n                </Row>\n              </Layout>\n            </Col>\n          </Row>\n        </Col>\n        <Col xs={0} md='7'>\n          <Row gutter={[0, 10]} style={{ marginTop: 32 }} >\n            <Col span={24}>\n              <ActiveUser />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </Content>\n  )\n}\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z\"\n}), 'NoteAdd');","// This icon file is generated automatically.\nvar SearchOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\" } }] }, \"name\": \"search\", \"theme\": \"outlined\" };\nexport default SearchOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SearchOutlinedSvg from \"@ant-design/icons-svg/es/asn/SearchOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar SearchOutlined = function SearchOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: SearchOutlinedSvg\n  }));\n};\n\n/**![search](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTkwOS42IDg1NC41TDY0OS45IDU5NC44QzY5MC4yIDU0Mi43IDcxMiA0NzkgNzEyIDQxMmMwLTgwLjItMzEuMy0xNTUuNC04Ny45LTIxMi4xLTU2LjYtNTYuNy0xMzItODcuOS0yMTIuMS04Ny45cy0xNTUuNSAzMS4zLTIxMi4xIDg3LjlDMTQzLjIgMjU2LjUgMTEyIDMzMS44IDExMiA0MTJjMCA4MC4xIDMxLjMgMTU1LjUgODcuOSAyMTIuMUMyNTYuNSA2ODAuOCAzMzEuOCA3MTIgNDEyIDcxMmM2NyAwIDEzMC42LTIxLjggMTgyLjctNjJsMjU5LjcgMjU5LjZhOC4yIDguMiAwIDAwMTEuNiAwbDQzLjYtNDMuNWE4LjIgOC4yIDAgMDAwLTExLjZ6TTU3MC40IDU3MC40QzUyOCA2MTIuNyA0NzEuOCA2MzYgNDEyIDYzNnMtMTE2LTIzLjMtMTU4LjQtNjUuNkMyMTEuMyA1MjggMTg4IDQ3MS44IDE4OCA0MTJzMjMuMy0xMTYuMSA2NS42LTE1OC40QzI5NiAyMTEuMyAzNTIuMiAxODggNDEyIDE4OHMxMTYuMSAyMy4yIDE1OC40IDY1LjZTNjM2IDM1Mi4yIDYzNiA0MTJzLTIzLjMgMTE2LjEtNjUuNiAxNTguNHoiIC8+PC9zdmc+) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(SearchOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'SearchOutlined';\n}\nexport default RefIcon;","/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument) {\n  const argStr = Object.prototype.toString.call(argument);\n\n  // Clone the date\n  if (\n    argument instanceof Date ||\n    (typeof argument === \"object\" && argStr === \"[object Date]\")\n  ) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new argument.constructor(+argument);\n  } else if (\n    typeof argument === \"number\" ||\n    argStr === \"[object Number]\" ||\n    typeof argument === \"string\" ||\n    argStr === \"[object String]\"\n  ) {\n    // TODO: Can we get rid of as?\n    return new Date(argument);\n  } else {\n    // TODO: Can we get rid of as?\n    return new Date(NaN);\n  }\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n"],"names":["getUnixTime","date","Math","trunc","toDate","Title","Typography","NewTopic","ndk","saveTopics","forums","saveForums","useContext","NostrContext","t","useTranslation","naddr","useParams","navigate","useNavigate","token","colorBgContainer","borderRadiusLG","theme","useToken","content","setContent","useState","forumTitle","setForumTitle","title","setTitle","forumEvent","setForumEvent","useEffect","fetchEvent","closeOnEose","then","event","dTag","undefined","_forumEvent$tagValue","tagValue","_jsx","Content","children","_jsxs","Row","justify","Col","xs","md","gutter","span","Breadcrumb","items","onClick","Skeleton","paragraph","rows","width","style","marginTop","kind","encode","Layout","background","borderRadius","padding","level","Input","onChange","v","target","value","TextArea","Button","disabled","type","htmlType","size","icon","NoteAddIcon","iconPosition","async","_filterForEventsTaggi","forumTag","filterForEventsTaggingId","topicEvent","NDKEvent","generateTags","tags","push","Date","toString","publish","result","newNaddr","ActiveUser","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","default","jsx","d","SearchOutlined","props","ref","React","AntdIcon","_extends","SearchOutlinedSvg","argument","argStr","Object","prototype","call","constructor","NaN"],"sourceRoot":""}